name: GitHub Actions Test
run-name: ${{ github.actor }} is testing out GitHub Actions 🚀
on: [push]
jobs:
    explore-actions:
        runs-on: ubuntu-latest
        steps:
            - run: echo "🎉 The job was automatically triggered by a ${{ github.event_name }} event."
            - run: echo "🐧 This job is now running on a ${{ runner.os }} server hosted by GitHub!"
            - run: echo "🔎 The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
            - name: Check out repository code
              uses: actions/checkout@v4
            - run: echo "💡 The ${{ github.repository }} repository has been cloned to the runner."
            - name: Update Libraries
              run: |
                sudo apt-get update -y
                sudo apt-get install -y openssh-client
            - name: Install Zola
              run: |
                sudo snap install zola --edge
            - name: Build Zola Application
              run: |
                zola build
                echo "Files in build directory"
                ls ${{ github.workspace}}/public
            - name: Rsync To Deploy New Build
              uses: burnett01/rsync-deployments@7.0.1
              with:
                switches: -avzr --delete
                path: public/
                remote_path: /var/www/html/
                remote_user: ${{ secrets.HOST_USERNAME }}
                remote_host: ${{ secrets.HOST }}
                remote_key: ${{ secrets.HOST_AUTH }}
            - run: echo "🍏 This job's status is ${{ job.status }}."